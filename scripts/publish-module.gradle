apply plugin: 'maven-publish'
apply plugin: 'signing'

task androidSourcesJar(type: Jar) {
    archiveClassifier.set('sources')
    from android.sourceSets.main.java.srcDirs
    from android.sourceSets.main.kotlin.srcDirs
}

artifacts {
    archives androidSourcesJar
}

def PUBLISH_GROUP_ID = 'io.github.naxtreasif'
def PUBLISH_VERSION = '1.0.0'
def PUBLISH_ARTIFACT_ID = 'compose_utility'

group = PUBLISH_GROUP_ID
version = PUBLISH_VERSION

afterEvaluate {
    publishing {
        publications {

            release(MavenPublication) {
                // The coordinates of the library, being set from variables that
                // we'll set up later
                groupId PUBLISH_GROUP_ID
                artifactId PUBLISH_ARTIFACT_ID
                version PUBLISH_VERSION

                // Two artifacts, the `aar` (or `jar`) and the sources
                if (project.plugins.findPlugin("com.android.library")) {
                    from components.release
                } else {
                    from components.java
                }

                artifact androidSourcesJar

                pom {
                    name = PUBLISH_ARTIFACT_ID
                    description = 'Test library'
                    url = 'https://github.com/naxtreasif/compose_utility'

                    developers {
                        developer {
                            id = 'naxtreasif'
                            name = 'Asif Khan'
                            email = 'rahatasif.work@gmail.com'
                        }
                        // Add all other devs here...
                    }

                    // Version control info - if you're using GitHub, follow the
                    // format as seen here
                    scm {
                        connection = 'scm:git:github.com/naxtreasif/compose_utility.git'
                        developerConnection = 'scm:git:ssh://github.com/naxtreasif/compose_utility.git'
                        url = 'https://github.com/naxtreasif/compose_utility/tree/master'
                    }
                }
            }
        }
    }
}

//ext["signing.keyId"] = '6B755CC4B133E0A395D0EC26EA095082E99F9B38'
//ext["signing.password"] = 'Maven#2022'
//ext["signing.ossKey"] = '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'

signing {

    useInMemoryPgpKeys(
            System.getenv("OSS_SIGNING_KEY_ID"),
            System.getenv("OSS_SIGNING_KEY"),
            System.getenv("OSS_SIGNING_PASSWORD"),
    )

    sign publishing.publications
}